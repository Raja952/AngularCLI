<!-- luxury-furniture.component.html -->
<div class="container">
  <!-- Loading State -->
  <div *ngIf="loading" class="text-center p-5">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
    <p class="mt-2">Loading luxury furniture...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error" class="alert alert-danger" role="alert">
    {{ error }}
  </div>

  <!-- Luxury Furniture Grid -->
  <div *ngIf="!loading && !error" class="row">
    <div class="col-lg-3 col-md-4 col-sm-6 col-12 mb-4" *ngFor="let item of luxuryFurniture">
      <div class="product-card shadow-sm border rounded h-100 d-flex flex-column">
        <!-- Image with click event -->
        <div class="image-container" style="cursor: pointer;" (click)="checkOutPage(item)">
          <img [alt]="item.title || 'Luxury Furniture Image'"
               [src]="item.src || 'assets/default-luxury.jpg'"
               class="img-fluid rounded-top w-100"
               style="height: 250px; object-fit: cover;"
               [id]="'luxury-' + item.id" />

          <!-- Discount/Badge -->
          <div *ngIf="item.discount || item.badge"
               [class.bg-danger]="item.discount && !item.badge"
               [class.bg-warning]="item.badge === 'Premium'"
               [class.bg-dark]="item.badge === 'Luxury' || item.badge === 'Exclusive'"
               [class.bg-secondary]="item.badge === 'Heritage'"
               class="discount-badge text-white p-1 px-2 position-absolute"
               style="top: 10px; right: 10px; border-radius: 3px;">
            {{ item.badge || item.discount }}
          </div>
        </div>

        <!-- Item Info -->
        <div class="product-info p-3 flex-grow-1 d-flex flex-column">
          <!-- Title -->
          <h6 class="text-truncate mb-2" [title]="item.title || 'Unknown Luxury Furniture'">
            {{ item.title || 'Unknown Luxury Furniture' }}
          </h6>

          <!-- Description -->
          <p *ngIf="item.description" class="text-muted small mb-2 flex-grow-1">
            {{ (item.description.length > 60) ? (item.description | slice:0:60) + '...' : item.description }}
          </p>

          <!-- Price and Discount -->
          <div class="price-section mt-auto">
            <div class="d-flex align-items-center mb-1">
              <span class="current-price h5 text-success fw-bold me-2">
                â‚¹{{ item.Amount | number }}
              </span>
            </div>

            <!-- Rating -->
            <div *ngIf="item.rating" class="mb-2">
              <div class="d-flex align-items-center">
                <span class="text-warning">
                  <i class="fas fa-star" *ngFor="let i of [1,2,3,4,5]"
                     [class.fas]="i <= item.rating"
                     [class.far]="i > item.rating"></i>
                </span>
                <span class="ms-1 small text-muted">{{ item.rating }}</span>
              </div>
            </div>

            <!-- Brand -->
            <div *ngIf="item.brand" class="text-muted small mb-2">
              {{ item.brand }}
            </div>

            <!-- EMI Info -->
            <div *ngIf="item.emi" class="text-primary small mb-2">
              <i class="fas fa-credit-card"></i> {{ item.emi }}
            </div>

            <!-- Shipping Info -->
            <div *ngIf="item.shipping" class="shipping-info small text-info mb-2">
              <i class="fas fa-shipping-fast"></i> {{ item.shipping }}
            </div>

            <!-- Stock Information -->
            <div *ngIf="item.quantity !== undefined" class="stock-info small mb-3">
              <div class="d-flex justify-content-between">
                <span class="text-muted">Available:</span>
                <span [class.text-success]="item.quantity > 0"
                      [class.text-danger]="item.quantity === 0">
                  {{ item.quantity }} {{ item.quantity === 1 ? 'piece' : 'pieces' }}
                </span>
              </div>
              <div *ngIf="item.maxQuantity" class="d-flex justify-content-between">
                <span class="text-muted">Max per order:</span>
                <span>{{ item.maxQuantity }}</span>
              </div>
            </div>
          </div>

          <!-- Action Button -->
          <button class="btn btn-primary w-100 mt-auto"
                  (click)="checkOutPage(item)"
                  [disabled]="item.quantity === 0">
            {{ item.quantity === 0 ? 'Out of Stock' : 'Buy Now' }}
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Empty State -->
  <div *ngIf="!loading && !error && luxuryFurniture.length === 0" class="text-center p-5">
    <div class="alert alert-info">
      <h4>No luxury furniture available at the moment</h4>
      <p>Please check back later.</p>
    </div>
  </div>
</div>
